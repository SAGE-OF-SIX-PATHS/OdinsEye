<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Fact Check Tester</title>
</head>

<body>
    <h2>Fact Check API Test</h2>

    <label for="claim">Enter Claim:</label><br>
    <input type="text" id="claim" placeholder="Type your claim here"><br><br>

    <button onclick="checkFact()">Check Fact</button>

    <h3>Result:</h3>
    <pre id="result"></pre>

    <script>
        async function checkFact() {
            const claim = document.getElementById('claimInput').value;

            try {
                const response = await fetch('/api/fact-check', { // <== NO trailing slash
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        claim
                    })
                });

                const data = await response.json();

                document.getElementById('result').innerHTML = `
      <p><strong>Claim:</strong> ${data.claim}</p>
      <p><strong>Rating:</strong> ${data.rating}</p>
      <p><strong>Source:</strong> <a href="${data.url}" target="_blank">${data.url}</a></p>
    `;

            } catch (error) {
                document.getElementById('result').innerHTML = '<p style="color:red;">Error checking fact. Try again.</p>';
            }
        }
    </script>
</body>

</html>